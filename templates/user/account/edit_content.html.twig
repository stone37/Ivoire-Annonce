{% form_theme form_update 'Ui/Form/theme.html.twig' %}

<section class="container">
    <div class="row mb-5 mt-md-5">
        <div class="col-12 col-md-8 col-lg-9">
            {{ include('ui/_flashes_message.html.twig') }}

            {{ form_start(form_update, {'attr': { 'class': 'fos_user_profile_edit', 'novalidate': 'novalidate' } }) }}
            <div class="card card-cascade mb-5">
                <div class="view view-cascade gradient-card-header bg-primary pt-3 pb-2 z-depth-0">
                    <h5 class="card-header-title h5-responsive">Vos informations</h5>
                </div>
                <div class="card-body card-body-cascade">
                    <div class="form-row">
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.lastName) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.firstName) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.email) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.phone) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.username) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.address) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_widget(form_update.country) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            {{ form_row(form_update.city) }}
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="form-check mt-4 pl-0">
                                <input type="checkbox" class="form-check-input filled-in" id="{{ form_update.phoneState.vars.id }}"
                                       value="{{ form_update.phoneState.vars.value }}" name="{{ form_update.phoneState.vars.full_name }}"
                                       {% if user.phoneState %}checked{% endif %} />
                                <label class="form-check-label pl-4" for="{{ form_update.phoneState.vars.id }}">{{ form_update.phoneState.vars.label }}
                                    <i class="fas fa-question-circle ml-1 dark-grey-text material-tooltip-main" data-toggle="tooltip"
                                       title="Il sera signifier dans vos annonces que votre numéro de téléphone est sur whatsApp"></i>
                                </label>
                            </div>
                        </div>
                    </div>
                    {{ form_widget(form_update._token) }}
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary z-depth-0">
                            <i class="fas fa-pencil-alt mr-2"></i> Modifier mon profil
                        </button>
                    </div>
                </div>
            </div>
            {{ form_end(form_update, {'render_rest': false}) }}
        </div>
        <div class="col-12 col-md-4 col-lg-3">
            {{ form_start(form_avatar, {'attr': { 'class': 'fos_user_avatar', 'novalidate': 'novalidate' } }) }}
            <div class="card card-cascade mb-4">
                <div class="view view-cascade gradient-card-header bg-grey pt-3 pb-2 z-depth-0">
                    <h6 class="card-header-title">Photo de profil</h6>
                </div>
                <div class="card-body card-body-cascade pt-4 pb-3 text-center image-bulk-container">
                    {% set avatar = vich_uploader_asset(user, 'file') %}

                    <div>
                        {% if avatar %}
                            <img src="{{ avatar }}" alt="" class="img-fluid img-thumbnail image-view mb-3" />
                        {% else %}
                            <img src="" alt="" class="img-fluid img-thumbnail image-view mb-3" />
                        {% endif %}
                    </div>

                    <div class="file-field text-center d-flex justify-content-center">
                        <div class="btn btn-mdb-color btn-sm float-left z-depth-0">
                            <i class="fas fa-cloud-upload-alt mr-1"></i>
                            {% if avatar %}
                                <span>Modifier la photo</span>
                            {% else %}
                                <span>Choisir une photo</span>
                            {% endif %}

                            <input type="file" class="entity-image" name="{{ form_avatar.file.children.file.vars.full_name }}" />
                        </div>
                    </div>

                    {{ form_widget(form_avatar._token) }}

                    <div class="text-center mt-3">
                        <button type="submit" class="btn btn-sm btn-grey z-depth-0">Valider</button>
                    </div>
                </div>
            </div>
            {{ form_end(form_avatar, {'render_rest': false}) }}
        </div>
    </div>
</section>







